<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <title>Staff Transformation Challenge Tracker</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Arial', sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header {
            background: linear-gradient(135deg, #ff9a76 0%, #ffc3a0 50%, #ffafbd 100%);
            padding: 40px 20px;
            text-align: center;
        }

        .header h1 {
            color: #1a4d2e;
            font-size: 2.5em;
            font-weight: bold;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }

        .header h2 {
            color: #1a4d2e;
            font-size: 1.1em;
            font-weight: normal;
        }

        .goals-section {
            padding: 30px;
            background: white;
        }

        .goals-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .goal-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }

        .input-group input {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .input-group input:focus {
            outline: none;
            border-color: #ff9a76;
        }

        .table-wrapper {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: 20px;
        }

        .tracker-table {
            width: 100%;
            min-width: 800px;
            border-collapse: collapse;
        }

        .tracker-table th {
            background-color: #d4d4c8;
            padding: 15px 10px;
            text-align: center;
            font-weight: bold;
            border: 1px solid #999;
            font-size: 14px;
        }

        .tracker-table td {
            padding: 15px 10px;
            border: 1px solid #ddd;
            text-align: center;
        }

        .tracker-table tr:nth-child(even) {
            background-color: #fafafa;
        }

        .week-cell {
            font-weight: bold;
            background-color: #f0f0f0;
        }

        .challenge-cell {
            text-align: left;
            padding-left: 15px;
        }

        .checkbox-cell {
            position: relative;
        }

        input[type="checkbox"] {
            width: 24px;
            height: 24px;
            cursor: pointer;
            -webkit-appearance: none;
            appearance: none;
            border: 2px solid #666;
            border-radius: 3px;
            position: relative;
            background: white;
        }

        input[type="checkbox"]:checked {
            background-color: #4CAF50;
            border-color: #4CAF50;
        }

        input[type="checkbox"]:checked::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        .final-section {
            padding: 30px;
            background: #f9f9f9;
            border-top: 3px solid #ff9a76;
        }

        .final-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .final-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .final-item label {
            font-weight: bold;
            flex-grow: 1;
            cursor: pointer;
        }

        .points-display {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            color: #1a4d2e;
            padding: 20px;
            background: linear-gradient(135deg, #ffc3a0 0%, #ffafbd 100%);
            border-radius: 8px;
            margin-top: 20px;
        }

        .button-container {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .reset-btn, .export-btn {
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }

        .reset-btn {
            background-color: #dc3545;
        }

        .reset-btn:hover {
            background-color: #c82333;
        }

        .export-btn {
            background-color: #28a745;
        }

        .export-btn:hover {
            background-color: #218838;
        }

        @media (max-width: 768px) {
            body {
                padding: 10px;
            }

            .header {
                padding: 20px 10px;
            }

            .header h1 {
                font-size: 1.5em;
                letter-spacing: 1px;
            }

            .header h2 {
                font-size: 0.9em;
            }

            .goals-section {
                padding: 15px;
            }

            .goal-row {
                grid-template-columns: 1fr;
            }

            .tracker-table {
                font-size: 10px;
                min-width: 700px;
            }

            .tracker-table th,
            .tracker-table td {
                padding: 6px 3px;
            }

            .tracker-table th {
                font-size: 9px;
            }

            .challenge-cell {
                padding-left: 8px;
                font-size: 10px;
            }

            input[type="checkbox"] {
                width: 20px;
                height: 20px;
            }

            .final-section {
                padding: 15px;
            }

            .final-grid {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .final-item {
                padding: 12px;
            }

            .points-display {
                font-size: 1.5em;
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>STAFF TRANSFORMATION<br>CHALLENGE TRACKER</h1>
            <h2>TRACK YOUR WEEKLY PROGRESS</h2>
        </div>

        <div class="goals-section">
            <div class="goals-container">
                <div class="input-group">
                    <label>Name:</label>
                    <input type="text" id="userName" placeholder="Enter your name" onchange="saveData()">
                </div>
                <div class="goal-row">
                    <div class="input-group">
                        <label>Primary Goal:</label>
                        <input type="text" id="primaryGoal" placeholder="Enter your primary goal" onchange="saveData()">
                    </div>
                    <div class="input-group">
                        <label>Secondary Goal:</label>
                        <input type="text" id="secondaryGoal" placeholder="Enter your secondary goal" onchange="saveData()">
                    </div>
                </div>
            </div>

            <div class="table-wrapper">
                <table class="tracker-table">
                    <thead>
                        <tr>
                            <th>Week</th>
                            <th>3 Classes<br>(25pts)</th>
                            <th>Complete Weekly Challenge<br>(15pts)</th>
                            <th>My Fitness Pal Tracking 5/7 days<br>(15pts)</th>
                            <th>Take the Benchmark / Specialty of the week<br>(15pts)</th>
                            <th>Weekly Challenges</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="week-cell">W1</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c1" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w1" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f1" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b1" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Take class with a team mate</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W2</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c2" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w2" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f2" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b2" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Take class at a studio other than your own</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W3</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c3" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w3" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f3" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b3" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Share a go-to snack and post pic</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W4</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c4" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w4" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f4" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b4" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Take a bonus class this week: 4 total classes</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W5</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c5" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w5" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f5" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b5" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Share a recipe in the team whatsapp</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W6</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c6" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w6" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f6" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b6" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Take a week-end class</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W7</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c7" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w7" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f7" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b7" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Share a non-scale victory to the whatsapp</td>
                        </tr>
                        <tr>
                            <td class="week-cell">W8</td>
                            <td class="checkbox-cell"><input type="checkbox" id="c8" data-points="25" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="w8" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="f8" data-points="15" onchange="update()"></td>
                            <td class="checkbox-cell"><input type="checkbox" id="b8" data-points="15" onchange="update()"></td>
                            <td class="challenge-cell">Take a different format than usual (hyrox, tread, strength)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="final-section">
            <div class="final-grid">
                <div class="final-item">
                    <input type="checkbox" id="initialScan" onchange="update()">
                    <label for="initialScan">Initial Inbody Scan (20 Pts)</label>
                </div>
                <div class="final-item">
                    <input type="checkbox" id="finalScan" onchange="update()">
                    <label for="finalScan">Final Inbody Scan (20 Pts)</label>
                </div>
                <div class="final-item">
                    <input type="checkbox" id="primaryGoalAchieved" onchange="update()">
                    <label for="primaryGoalAchieved">Hit Primary Goal (20pts)</label>
                </div>
                <div class="final-item">
                    <input type="checkbox" id="secondaryGoalAchieved" onchange="update()">
                    <label for="secondaryGoalAchieved">Hit Secondary Goal (10pts)</label>
                </div>
            </div>

            <div class="points-display">
                Total Points: <span id="totalPoints">0</span>
            </div>

            <div class="button-container">
                <button class="export-btn" onclick="exportToPDF()">Export to PDF</button>
                <button class="reset-btn" onclick="resetAll()">Reset All Data</button>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
        function update() {
            var total = 0;

            // Weekly checkboxes
            var weeklyBoxes = document.querySelectorAll('input[type="checkbox"][data-points]');
            for (var i = 0; i < weeklyBoxes.length; i++) {
                if (weeklyBoxes[i].checked) {
                    total += parseInt(weeklyBoxes[i].getAttribute('data-points'));
                }
            }

            // Final checkboxes
            if (document.getElementById('initialScan').checked) total += 20;
            if (document.getElementById('finalScan').checked) total += 20;
            if (document.getElementById('primaryGoalAchieved').checked) total += 20;
            if (document.getElementById('secondaryGoalAchieved').checked) total += 10;

            // Update display
            document.getElementById('totalPoints').textContent = total;

            // Save to localStorage
            saveData();
        }

        function saveData() {
            try {
                var data = {
                    userName: document.getElementById('userName').value,
                    primaryGoal: document.getElementById('primaryGoal').value,
                    secondaryGoal: document.getElementById('secondaryGoal').value,
                    boxes: {}
                };

                var allBoxes = document.querySelectorAll('input[type="checkbox"]');
                for (var i = 0; i < allBoxes.length; i++) {
                    if (allBoxes[i].id) {
                        data.boxes[allBoxes[i].id] = allBoxes[i].checked;
                    }
                }

                localStorage.setItem('tracker', JSON.stringify(data));
            } catch (e) {
                // Silently fail if localStorage is not available
            }
        }

        function loadData() {
            try {
                var saved = localStorage.getItem('tracker');
                if (saved) {
                    var data = JSON.parse(saved);
                    document.getElementById('userName').value = data.userName || '';
                    document.getElementById('primaryGoal').value = data.primaryGoal || '';
                    document.getElementById('secondaryGoal').value = data.secondaryGoal || '';

                    for (var id in data.boxes) {
                        var box = document.getElementById(id);
                        if (box) {
                            box.checked = data.boxes[id];
                        }
                    }

                    update();
                }
            } catch (e) {
                // Silently fail if localStorage is not available
            }
        }

        function exportToPDF() {
            // Get the user's name for the filename
            var userName = document.getElementById('userName').value || 'tracker';
            var filename = userName.replace(/[^a-z0-9]/gi, '_').toLowerCase() + '_progress.pdf';

            // Clone the container to modify for PDF
            var element = document.querySelector('.container').cloneNode(true);

            // Remove buttons from the cloned element
            var buttons = element.querySelector('.button-container');
            if (buttons) {
                buttons.remove();
            }

            // Create a temporary wrapper for better PDF rendering
            var wrapper = document.createElement('div');
            wrapper.style.padding = '0';
            wrapper.style.margin = '0';
            wrapper.style.background = 'white';
            wrapper.appendChild(element);

            // PDF options - landscape for wide table
            var opt = {
                margin: [5, 5, 5, 5],
                filename: filename,
                image: { type: 'jpeg', quality: 0.95 },
                html2canvas: {
                    scale: 2,
                    useCORS: true,
                    letterRendering: true,
                    scrollY: 0,
                    scrollX: 0
                },
                jsPDF: {
                    unit: 'mm',
                    format: 'a4',
                    orientation: 'landscape',
                    compress: true
                },
                pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
            };

            // Generate PDF
            html2pdf().set(opt).from(wrapper).save();
        }

        function resetAll() {
            if (confirm('Are you sure you want to reset all data? This cannot be undone.')) {
                localStorage.removeItem('tracker');
                document.getElementById('userName').value = '';
                document.getElementById('primaryGoal').value = '';
                document.getElementById('secondaryGoal').value = '';

                var allBoxes = document.querySelectorAll('input[type="checkbox"]');
                for (var i = 0; i < allBoxes.length; i++) {
                    allBoxes[i].checked = false;
                }

                update();
            }
        }

        // Load data when page loads
        window.onload = function() {
            loadData();
        };
    </script>
</body>
</html>
